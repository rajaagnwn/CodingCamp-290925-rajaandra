<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Raja Todo List</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="bg-white p-6 rounded shadow-md w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4 text-center">Raja To do List</h1>

    <!-- Form Add Todo -->
    <form id="todo-form" class="flex flex-col gap-2">
      <input 
        type="text" 
        id="todo-input" 
        placeholder="Masukkan todo list..." 
        class="border rounded p-2" 
        required
      >
      <input 
        type="date" 
        id="todo-date" 
        class="border rounded p-2" 
        required
      >
      <button 
        type="submit" 
        class="bg-blue-600 text-white rounded p-2 hover:bg-blue-700">
        Add Task
      </button>
    </form>

    <!-- Buttons -->
    <section class="mt-4 flex gap-2">
      <button 
        type="button" 
        onclick="deleteAllTodos()" 
        class="bg-red-600 text-white rounded p-2 hover:bg-red-700 w-full">
        Delete All
      </button>

      <button  
        type="button" 
        onclick="filterTodos()" 
        class="bg-green-600 text-white rounded p-2 hover:bg-green-700 w-full">
        Filter
      </button>
    </section>

    <!-- Todo List -->
    <ul id="todo-list" class="mt-4 border rounded p-2">
      <li class="text-gray-400 text-center">No todos yet. Add one above!</li>
    </ul>
  </div>

  <script>
    const form = document.getElementById("todo-form");
    const todoInput = document.getElementById("todo-input");
    const todoDate = document.getElementById("todo-date");
    const todoList = document.getElementById("todo-list");

    let todos = [];

    // Render Todos
    function renderTodos(list = todos) {
      todoList.innerHTML = "";

      if (list.length === 0) {
        todoList.innerHTML = `<li class="text-gray-400 text-center">No todos yet. Add one above!</li>`;
        return;
      }

      list.forEach((todo, index) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center border-b py-2";

        li.innerHTML = `
          <span>${todo.text} - <small>${todo.date}</small></span>
          <button onclick="deleteTodo(${index})" class="bg-red-500 text-white px-2 py-1 rounded">
            X
          </button>
        `;
        todoList.appendChild(li);
      });
    }

    // Add Todo
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const text = todoInput.value.trim();
      const date = todoDate.value;

      if (text && date) {
        todos.push({ text, date });
        renderTodos();
        form.reset();
      }
    });

    // Delete Single Todo
    function deleteTodo(index) {
      todos.splice(index, 1);
      renderTodos();
    }

    // Delete All
    function deleteAllTodos() {
      todos = [];
      renderTodos();
    }

    // Filter Todos pakai date input yang sama
    function filterTodos() {
      const filterDate = todoDate.value;

      if (!filterDate) {
        renderTodos();
        return;
      }

      const filtered = todos.filter(todo => todo.date === filterDate);
      renderTodos(filtered);
    }
  </script>
</body>
</html>
